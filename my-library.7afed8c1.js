!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequireb753;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequireb753=i);var r=i("1kXJT"),s=i("iU1Pc");function o(e){return e.map((function(e){var t=e.poster_path,n=e.title,a=e.genres,i=e.release_date,r=e.vote_average,s=e.id,o=a.map((function(e){return e.name}));return o.length>2&&(o="".concat(o[0],", ").concat(o[1],", Other")),'<li class="list__item" id="'.concat(s,'">\n        <img class="list__img" src="https://image.tmdb.org/t/p/original/').concat(t,'" alt="').concat(n,'"></img>\n        <div class="list__text">\n        <h2 class="list__title">').concat(n,'</h2>\n        <p class="list__genre">').concat(o," | ").concat(i.slice(0,4),'&nbsp&nbsp\n        <span class="list__vote">').concat(r.toFixed(1),"</span></p>\n        </div>\n      </li>")})).join("")}var c=i("jcFG7"),l=document.querySelector(".js-library"),d=document.querySelector(".js-watched"),u=document.querySelector(".js-queue"),v=document.getElementById("tui-pagination-container"),g=r.default.load("watched");g=g||[];var m,f,p=r.default.load("queue");function y(e){"string"!=typeof e&&(e=e.target?e.target.name:"watched"),"queue"===e?(d.classList.remove("active"),u.classList.add("active")):(d.classList.add("active"),u.classList.remove("active")),r.default.save("library-state",e),function(e){f=window.innerWidth>=1280?9:window.innerWidth>=768?8:4;if(r.default.load(e)&&r.default.load(e).length){m=(0,c.default)(r.default.load(e).length,f),v.removeAttribute("style"),m.on("afterMove",(function(t){l.innerHTML=o(r.default.load(e).slice(t.page*f-f,t.page*f)),sessionStorage.setItem("page",t.page)}));var t=sessionStorage.getItem("savePage")||1;m.movePageTo(t),sessionStorage.removeItem("savePage")}else v.setAttribute("style","display: none"),l.innerHTML="",s.Notify.info("Your library is empty. You can add something")}(e)}p=p||[],i("5xtVg"),i("hbHJK");r=i("1kXJT");i("hbHJK");var h,w,L=i("bpxeT"),b=i("2TvXO"),_=(s=i("iU1Pc"),c=i("jcFG7"),(0,i("k07jD").default)()),E=document.querySelector(".js-library"),S=document.querySelector(".js-watched"),q=document.querySelector(".js-queue"),k=document.getElementById("tui-pagination-container"),x="watched";function T(e){x=e.target.name,j()}function j(){return O.apply(this,arguments)}function O(){return(O=e(L)(e(b).mark((function t(){var n,a;return e(b).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(sessionStorage.getItem("user")),e.next=3,_.readUserData(n.uid);case 3:if(a=e.sent){e.next=9;break}return _.writeUserData(n.uid,[],[],"watched"),e.next=8,_.readUserData(n.uid);case 8:a=e.sent;case 9:"queue"===x?(S.classList.remove("active"),q.classList.add("active")):(S.classList.add("active"),q.classList.remove("active")),a.state=x,_.writeUserData(n.uid,a.watched||[],a.queue||[],a.state),I(a[x]);case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function I(e){if(w=window.innerWidth>=1280?9:window.innerWidth>=768?8:4,e){h=(0,c.default)(e.length,w),k.removeAttribute("style"),h.on("afterMove",(function(t){E.innerHTML=o(e.slice(t.page*w-w,t.page*w)),sessionStorage.setItem("page",t.page)}));var t=sessionStorage.getItem("savePage")||1;h.movePageTo(t),sessionStorage.removeItem("savePage")}else k.setAttribute("style","display: none"),E.innerHTML="",s.Notify.info("Your library is empty. You can add something")}var M,P=i("95ECi"),U=(P=i("95ECi"),M={upbutton:document.querySelector(".link__up")},window.addEventListener("scroll",(function(){window.pageYOffset<100?M.upbutton.classList.add("isnt-show"):M.upbutton.classList.remove("isnt-show")})),document.querySelector("#user")),D=document.querySelector(".js-watched"),J=document.querySelector(".js-queue");U.addEventListener("isLogedIn",(function(){D.addEventListener("click",T),J.addEventListener("click",T),D.removeEventListener("click",y),J.removeEventListener("click",y),j()}));var N=r.default.load("library-state");N=N||[];var F=JSON.parse(sessionStorage.getItem("user"));F?(U.textContent=F.displayName||"Anonymous",U.removeEventListener("click",P.registerOpen),U.addEventListener("click",P.logOutForm),D.addEventListener("click",T),J.addEventListener("click",T),j()):(U.removeEventListener("click",P.logOutForm),U.addEventListener("click",P.registerOpen),U.textContent="Login | Join",D.addEventListener("click",y),J.addEventListener("click",y),y(N))}();
//# sourceMappingURL=my-library.7afed8c1.js.map
