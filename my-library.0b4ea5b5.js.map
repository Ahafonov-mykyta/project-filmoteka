{"mappings":"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","sources":["src/js/buttonsMyLibHeader.js","src/js/libraryMarkup.js","src/js/btnFromFirebase.js","src/js/hiddenArrowUp.js","src/my-library.js"],"sourcesContent":["import lsAPI from './localestorage';\nimport { Notify } from 'notiflix';\nimport libraryMarkup from './libraryMarkup';\nimport getPagination from './pagination';\n\nconst libraryEl = document.querySelector('.js-library');\nconst watchedBtn = document.querySelector('.js-watched');\nconst queueBtn = document.querySelector('.js-queue');\nconst container = document.getElementById('tui-pagination-container');\n\nconst LS_WATCHED_KEY = 'watched';\nconst LS_QUEUE_KEY = 'queue';\nconst LS_LIBRARY_STATE = 'library-state';\n\nlet watchList = lsAPI.load(LS_WATCHED_KEY);\nwatchList = watchList ? watchList : [];\n\nlet queueList = lsAPI.load(LS_QUEUE_KEY);\nqueueList = queueList ? queueList : [];\n\nlet pagination, perPage, currentPage;\n\nexport function btnClick(btn) {\n    if (typeof btn !== 'string') {\n        btn = btn.target ? btn.target.name : 'watched';\n    }\n\n    if (btn === 'queue') {\n        watchedBtn.classList.remove('active');\n        queueBtn.classList.add('active');\n    } else {\n        watchedBtn.classList.add('active');\n        queueBtn.classList.remove('active');\n    }\n    lsAPI.save(LS_LIBRARY_STATE, btn);\n    onPagination(btn);\n}\n\nfunction onPagination(btn) {\n    if (window.innerWidth >= 1280) {\n        perPage = 9;\n    } else if (window.innerWidth >= 768) {\n        perPage = 8;\n    } else perPage = 4;\n\n    if (lsAPI.load(btn) && lsAPI.load(btn).length) {\n        pagination = getPagination(lsAPI.load(btn).length, perPage);\n        container.removeAttribute('style');\n        pagination.on('afterMove', event => {\n            libraryEl.innerHTML = libraryMarkup(\n                lsAPI\n                    .load(btn)\n                    .slice(event.page * perPage - perPage, event.page * perPage)\n            );\n            sessionStorage.setItem('page', event.page);\n        });\n\n        const savePage = sessionStorage.getItem('savePage') || 1;\n        pagination.movePageTo(savePage);\n        sessionStorage.removeItem('savePage');\n    } else {\n        container.setAttribute('style', 'display: none');\n        libraryEl.innerHTML = '';\n        Notify.info('Your library is empty. You can add something');\n    }\n}\n","export default function libraryMarkup(moviesSet) {\n    return moviesSet\n        .map(\n            ({\n                poster_path,\n                title,\n                genres,\n                release_date,\n                vote_average,\n                id,\n            }) => {\n                let movieGenres = genres.map(genre => genre.name);\n                if (movieGenres.length > 2) {\n                    movieGenres = `${movieGenres[0]}, ${movieGenres[1]}, Other`;\n                }\n                return /*html*/ `<li class=\"list__item\" id=\"${id}\">\n        <img class=\"list__img\" src=\"https://image.tmdb.org/t/p/original/${poster_path}\" alt=\"${title}\"></img>\n        <div class=\"list__text\">\n        <h2 class=\"list__title\">${title}</h2>\n        <p class=\"list__genre\">${movieGenres} | ${release_date.slice(\n                    0,\n                    4\n                )}&nbsp&nbsp\n        <span class=\"list__vote\">${vote_average.toFixed(1)}</span></p>\n        </div>\n      </li>`;\n            }\n        )\n        .join('');\n}\n","import { Notify } from 'notiflix';\nimport libraryMarkup from './libraryMarkup';\nimport getPagination from './pagination';\nimport getDataBase from './dataBase';\n\nconst db = getDataBase();\nconst libraryEl = document.querySelector('.js-library');\nconst watchedBtn = document.querySelector('.js-watched');\nconst queueBtn = document.querySelector('.js-queue');\nconst container = document.getElementById('tui-pagination-container');\n\nlet btn = 'watched';\nlet pagination, perPage, currentPage;\n\nexport function clickFirebase(event) {\n    btn = event.target.name;\n    btnClickFirebase();\n}\n\nexport async function btnClickFirebase() {\n    const user = JSON.parse(sessionStorage.getItem('user'));\n    let userDatabase = await db.readUserData(user.uid);\n    if (!userDatabase) {\n        db.writeUserData(user.uid, [], [], 'watched');\n        userDatabase = await db.readUserData(user.uid);\n    }\n\n    if (btn === 'queue') {\n        watchedBtn.classList.remove('active');\n        queueBtn.classList.add('active');\n    } else {\n        watchedBtn.classList.add('active');\n        queueBtn.classList.remove('active');\n    }\n    userDatabase.state = btn;\n    db.writeUserData(\n        user.uid,\n        userDatabase.watched || [],\n        userDatabase.queue || [],\n        userDatabase.state\n    );\n    onPagination(userDatabase[btn]);\n}\n\nfunction onPagination(list) {\n    if (window.innerWidth >= 1280) {\n        perPage = 9;\n    } else if (window.innerWidth >= 768) {\n        perPage = 8;\n    } else perPage = 4;\n\n    if (list) {\n        pagination = getPagination(list.length, perPage);\n        container.removeAttribute('style');\n        pagination.on('afterMove', event => {\n            libraryEl.innerHTML = libraryMarkup(\n                list.slice(event.page * perPage - perPage, event.page * perPage)\n            );\n            sessionStorage.setItem('page', event.page);\n        });\n        const savePage = sessionStorage.getItem('savePage') || 1;\n        pagination.movePageTo(savePage);\n        sessionStorage.removeItem('savePage');\n    } else {\n        container.setAttribute('style', 'display: none');\n        libraryEl.innerHTML = '';\n        Notify.info('Your library is empty. You can add something');\n    }\n}\n","export default (() => {\n    const refs = {\n        upbutton: document.querySelector('.link__up'),\n    };\n\n    window.addEventListener('scroll', showArrow);\n\n    function showArrow() {\n        if (window.pageYOffset < 100) refs.upbutton.classList.add('isnt-show');\n        else refs.upbutton.classList.remove('isnt-show');\n    }\n})();\n","import './js/buttonsMyLibHeader';\nimport './js/modal';\nimport './js/modalSingUp';\nimport lsAPI from './js/localestorage';\nimport { watchedBtnClick, queueBtnClick } from './js/buttonsMyLibHeader';\nimport './js/modalSingUp';\nimport { btnClick } from './js/buttonsMyLibHeader';\nimport { clickFirebase, btnClickFirebase } from './js/btnFromFirebase';\nimport './js/authentication';\nimport { logOutForm, registerOpen } from './js/authentication';\nimport * as hiddenArrowUp from './js/hiddenArrowUp';\n\nconst LS_LIBRARY_STATE = 'library-state';\nconst signUp = document.querySelector('#user');\nconst watchedBtn = document.querySelector('.js-watched');\nconst queueBtn = document.querySelector('.js-queue');\nsignUp.addEventListener('isLogedIn', userLogin);\n\nlet libraryState = lsAPI.load(LS_LIBRARY_STATE);\nlibraryState = libraryState ? libraryState : [];\nconst user = JSON.parse(sessionStorage.getItem('user'));\n\nif (user) {\n    signUp.textContent = user.displayName || 'Anonymous';\n    signUp.removeEventListener('click', registerOpen);\n    signUp.addEventListener('click', logOutForm);\n    watchedBtn.addEventListener('click', clickFirebase);\n    queueBtn.addEventListener('click', clickFirebase);\n    btnClickFirebase();\n} else {\n    signUp.removeEventListener('click', logOutForm);\n    signUp.addEventListener('click', registerOpen);\n    signUp.textContent = 'Login | Join';\n    watchedBtn.addEventListener('click', btnClick);\n    queueBtn.addEventListener('click', btnClick);\n    btnClick(libraryState);\n}\n\nfunction userLogin() {\n    watchedBtn.addEventListener('click', clickFirebase);\n    queueBtn.addEventListener('click', clickFirebase);\n    watchedBtn.removeEventListener('click', btnClick);\n    queueBtn.removeEventListener('click', btnClick);\n    btnClickFirebase();\n}\n"],"names":["$bJT8V","parcelRequire","$5a89392a7500e643$export$2e2bcd8739ae039","moviesSet","map","poster_path","title","genres","release_date","vote_average","id","movieGenres","genre","name","length","slice","toFixed","join","$db84767f1de8312a$var$libraryEl","document","querySelector","$db84767f1de8312a$var$watchedBtn","$db84767f1de8312a$var$queueBtn","$db84767f1de8312a$var$container","getElementById","$db84767f1de8312a$var$watchList","default","load","$db84767f1de8312a$var$pagination","$db84767f1de8312a$var$perPage","$db84767f1de8312a$var$queueList","$db84767f1de8312a$export$7b0f8be661aeb9d7","btn","target","classList","remove","add","save","window","innerWidth","$2nhTy","removeAttribute","on","event","innerHTML","page","sessionStorage","setItem","savePage","getItem","movePageTo","removeItem","setAttribute","$eWCmQ","Notify","info","$db84767f1de8312a$var$onPagination","$df069cfa70d8c112$var$db","$df069cfa70d8c112$var$libraryEl","$df069cfa70d8c112$var$watchedBtn","$df069cfa70d8c112$var$queueBtn","$df069cfa70d8c112$var$container","$df069cfa70d8c112$var$pagination","$df069cfa70d8c112$var$perPage","$df069cfa70d8c112$var$btn","$df069cfa70d8c112$export$40a221885d5feae1","$df069cfa70d8c112$export$40f4114f0500288b","async","user","JSON","parse","userDatabase","readUserData","uid","writeUserData","state","watched","queue","list","$df069cfa70d8c112$var$onPagination","refs","upbutton","addEventListener","pageYOffset","$fc8e7c71b3b7ed96$var$signUp","$fc8e7c71b3b7ed96$var$watchedBtn","$fc8e7c71b3b7ed96$var$queueBtn","removeEventListener","$fc8e7c71b3b7ed96$var$libraryState","$fc8e7c71b3b7ed96$var$user","textContent","displayName","$d2gfz","registerOpen","logOutForm"],"version":3,"file":"my-library.0b4ea5b5.js.map"}