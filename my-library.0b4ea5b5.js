var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequireb753;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var s={id:e,exports:{}};return t[e]=s,i.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequireb753=i);var s=i("bJT8V"),a=i("eWCmQ");function o(e){return e.map((({poster_path:e,title:t,genres:n,release_date:i,vote_average:s,id:a})=>{let o=n.map((e=>e.name));return o.length>2&&(o=`${o[0]}, ${o[1]}, Other`),`<li class="list__item" id="${a}">\n        <img class="list__img" src="https://image.tmdb.org/t/p/original/${e}" alt="${t}"></img>\n        <div class="list__text">\n        <h2 class="list__title">${t}</h2>\n        <p class="list__genre">${o} | ${i.slice(0,4)}&nbsp&nbsp\n        <span class="list__vote">${s.toFixed(1)}</span></p>\n        </div>\n      </li>`})).join("")}var r=i("2nhTy");const l=document.querySelector(".js-library"),d=document.querySelector(".js-watched"),c=document.querySelector(".js-queue"),u=document.getElementById("tui-pagination-container");let g=s.default.load("watched");g=g||[];let m,v,p=s.default.load("queue");function f(e){"string"!=typeof e&&(e=e.target?e.target.name:"watched"),"queue"===e?(d.classList.remove("active"),c.classList.add("active")):(d.classList.add("active"),c.classList.remove("active")),s.default.save("library-state",e),function(e){v=window.innerWidth>=1280?9:window.innerWidth>=768?8:4;if(s.default.load(e)&&s.default.load(e).length){m=(0,r.default)(s.default.load(e).length,v),u.removeAttribute("style"),m.on("afterMove",(t=>{l.innerHTML=o(s.default.load(e).slice(t.page*v-v,t.page*v)),sessionStorage.setItem("page",t.page)}));const t=sessionStorage.getItem("savePage")||1;m.movePageTo(t),sessionStorage.removeItem("savePage")}else u.setAttribute("style","display: none"),l.innerHTML="",a.Notify.info("Your library is empty. You can add something")}(e)}p=p||[],i("bTcpz"),i("3edqM");s=i("bJT8V");i("3edqM");a=i("eWCmQ"),r=i("2nhTy");const y=(0,i("93rYB").default)(),w=document.querySelector(".js-library"),L=document.querySelector(".js-watched"),h=document.querySelector(".js-queue"),b=document.getElementById("tui-pagination-container");let q,S,_="watched";function E(e){_=e.target.name,T()}async function T(){const e=JSON.parse(sessionStorage.getItem("user"));let t=await y.readUserData(e.uid);t||(y.writeUserData(e.uid,[],[],"watched"),t=await y.readUserData(e.uid)),"queue"===_?(L.classList.remove("active"),h.classList.add("active")):(L.classList.add("active"),h.classList.remove("active")),t.state=_,y.writeUserData(e.uid,t.watched||[],t.queue||[],t.state),function(e){S=window.innerWidth>=1280?9:window.innerWidth>=768?8:4;if(e){q=(0,r.default)(e.length,S),b.removeAttribute("style"),q.on("afterMove",(t=>{w.innerHTML=o(e.slice(t.page*S-S,t.page*S)),sessionStorage.setItem("page",t.page)}));const t=sessionStorage.getItem("savePage")||1;q.movePageTo(t),sessionStorage.removeItem("savePage")}else b.setAttribute("style","display: none"),w.innerHTML="",a.Notify.info("Your library is empty. You can add something")}(t[_])}var k=i("d2gfz");k=i("d2gfz"),(()=>{const e={upbutton:document.querySelector(".link__up")};window.addEventListener("scroll",(function(){window.pageYOffset<100?e.upbutton.classList.add("isnt-show"):e.upbutton.classList.remove("isnt-show")}))})();const I=document.querySelector("#user"),O=document.querySelector(".js-watched"),j=document.querySelector(".js-queue");I.addEventListener("isLogedIn",(function(){O.addEventListener("click",E),j.addEventListener("click",E),O.removeEventListener("click",f),j.removeEventListener("click",f),T()}));let x=s.default.load("library-state");x=x||[];const M=JSON.parse(sessionStorage.getItem("user"));M?(I.textContent=M.displayName||"Anonymous",I.removeEventListener("click",k.registerOpen),I.addEventListener("click",k.logOutForm),O.addEventListener("click",E),j.addEventListener("click",E),T()):(I.removeEventListener("click",k.logOutForm),I.addEventListener("click",k.registerOpen),I.textContent="Login | Join",O.addEventListener("click",f),j.addEventListener("click",f),f(x));
//# sourceMappingURL=my-library.0b4ea5b5.js.map
