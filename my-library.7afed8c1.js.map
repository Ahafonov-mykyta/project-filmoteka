{"mappings":"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","sources":["src/js/buttonsMyLibHeader.js","src/js/libraryMarkup.js","src/js/btnFromFirebase.js","src/js/hiddenArrowUp.js","src/my-library.js"],"sourcesContent":["import lsAPI from './localestorage';\nimport { Notify } from 'notiflix';\nimport libraryMarkup from './libraryMarkup';\nimport getPagination from './pagination';\n\nconst libraryEl = document.querySelector('.js-library');\nconst watchedBtn = document.querySelector('.js-watched');\nconst queueBtn = document.querySelector('.js-queue');\nconst container = document.getElementById('tui-pagination-container');\n\nconst LS_WATCHED_KEY = 'watched';\nconst LS_QUEUE_KEY = 'queue';\nconst LS_LIBRARY_STATE = 'library-state';\n\nlet watchList = lsAPI.load(LS_WATCHED_KEY);\nwatchList = watchList ? watchList : [];\n\nlet queueList = lsAPI.load(LS_QUEUE_KEY);\nqueueList = queueList ? queueList : [];\n\nlet pagination, perPage, currentPage;\n\nexport function btnClick(btn) {\n    if (typeof btn !== 'string') {\n        btn = btn.target ? btn.target.name : 'watched';\n    }\n\n    if (btn === 'queue') {\n        watchedBtn.classList.remove('active');\n        queueBtn.classList.add('active');\n    } else {\n        watchedBtn.classList.add('active');\n        queueBtn.classList.remove('active');\n    }\n    lsAPI.save(LS_LIBRARY_STATE, btn);\n    onPagination(btn);\n}\n\nfunction onPagination(btn) {\n    if (window.innerWidth >= 1280) {\n        perPage = 9;\n    } else if (window.innerWidth >= 768) {\n        perPage = 8;\n    } else perPage = 4;\n\n    if (lsAPI.load(btn) && lsAPI.load(btn).length) {\n        pagination = getPagination(lsAPI.load(btn).length, perPage);\n        container.removeAttribute('style');\n        pagination.on('afterMove', event => {\n            libraryEl.innerHTML = libraryMarkup(\n                lsAPI\n                    .load(btn)\n                    .slice(event.page * perPage - perPage, event.page * perPage)\n            );\n            sessionStorage.setItem('page', event.page);\n        });\n\n        const savePage = sessionStorage.getItem('savePage') || 1;\n        pagination.movePageTo(savePage);\n        sessionStorage.removeItem('savePage');\n    } else {\n        container.setAttribute('style', 'display: none');\n        libraryEl.innerHTML = '';\n        Notify.info('Your library is empty. You can add something');\n    }\n}\n","export default function libraryMarkup(moviesSet) {\n    return moviesSet\n        .map(\n            ({\n                poster_path,\n                title,\n                genres,\n                release_date,\n                vote_average,\n                id,\n            }) => {\n                let movieGenres = genres.map(genre => genre.name);\n                if (movieGenres.length > 2) {\n                    movieGenres = `${movieGenres[0]}, ${movieGenres[1]}, Other`;\n                }\n                return /*html*/ `<li class=\"list__item\" id=\"${id}\">\n        <img class=\"list__img\" src=\"https://image.tmdb.org/t/p/original/${poster_path}\" alt=\"${title}\"></img>\n        <div class=\"list__text\">\n        <h2 class=\"list__title\">${title}</h2>\n        <p class=\"list__genre\">${movieGenres} | ${release_date.slice(\n                    0,\n                    4\n                )}&nbsp&nbsp\n        <span class=\"list__vote\">${vote_average.toFixed(1)}</span></p>\n        </div>\n      </li>`;\n            }\n        )\n        .join('');\n}\n","import { Notify } from 'notiflix';\nimport libraryMarkup from './libraryMarkup';\nimport getPagination from './pagination';\nimport getDataBase from './dataBase';\n\nconst db = getDataBase();\nconst libraryEl = document.querySelector('.js-library');\nconst watchedBtn = document.querySelector('.js-watched');\nconst queueBtn = document.querySelector('.js-queue');\nconst container = document.getElementById('tui-pagination-container');\n\nlet btn = 'watched';\nlet pagination, perPage, currentPage;\n\nexport function clickFirebase(event) {\n    btn = event.target.name;\n    btnClickFirebase();\n}\n\nexport async function btnClickFirebase() {\n    const user = JSON.parse(sessionStorage.getItem('user'));\n    let userDatabase = await db.readUserData(user.uid);\n    if (!userDatabase) {\n        db.writeUserData(user.uid, [], [], 'watched');\n        userDatabase = await db.readUserData(user.uid);\n    }\n\n    if (btn === 'queue') {\n        watchedBtn.classList.remove('active');\n        queueBtn.classList.add('active');\n    } else {\n        watchedBtn.classList.add('active');\n        queueBtn.classList.remove('active');\n    }\n    userDatabase.state = btn;\n    db.writeUserData(\n        user.uid,\n        userDatabase.watched || [],\n        userDatabase.queue || [],\n        userDatabase.state\n    );\n    onPagination(userDatabase[btn]);\n}\n\nfunction onPagination(list) {\n    if (window.innerWidth >= 1280) {\n        perPage = 9;\n    } else if (window.innerWidth >= 768) {\n        perPage = 8;\n    } else perPage = 4;\n\n    if (list) {\n        pagination = getPagination(list.length, perPage);\n        container.removeAttribute('style');\n        pagination.on('afterMove', event => {\n            libraryEl.innerHTML = libraryMarkup(\n                list.slice(event.page * perPage - perPage, event.page * perPage)\n            );\n            sessionStorage.setItem('page', event.page);\n        });\n        const savePage = sessionStorage.getItem('savePage') || 1;\n        pagination.movePageTo(savePage);\n        sessionStorage.removeItem('savePage');\n    } else {\n        container.setAttribute('style', 'display: none');\n        libraryEl.innerHTML = '';\n        Notify.info('Your library is empty. You can add something');\n    }\n}\n","export default (() => {\n    const refs = {\n        upbutton: document.querySelector('.link__up'),\n    };\n\n    window.addEventListener('scroll', showArrow);\n\n    function showArrow() {\n        if (window.pageYOffset < 100) refs.upbutton.classList.add('isnt-show');\n        else refs.upbutton.classList.remove('isnt-show');\n    }\n})();\n","import './js/buttonsMyLibHeader';\nimport './js/modal';\nimport './js/modalSingUp';\nimport lsAPI from './js/localestorage';\nimport { watchedBtnClick, queueBtnClick } from './js/buttonsMyLibHeader';\nimport './js/modalSingUp';\nimport { btnClick } from './js/buttonsMyLibHeader';\nimport { clickFirebase, btnClickFirebase } from './js/btnFromFirebase';\nimport './js/authentication';\nimport { logOutForm, registerOpen } from './js/authentication';\nimport * as hiddenArrowUp from './js/hiddenArrowUp';\n\nconst LS_LIBRARY_STATE = 'library-state';\nconst signUp = document.querySelector('#user');\nconst watchedBtn = document.querySelector('.js-watched');\nconst queueBtn = document.querySelector('.js-queue');\nsignUp.addEventListener('isLogedIn', userLogin);\n\nlet libraryState = lsAPI.load(LS_LIBRARY_STATE);\nlibraryState = libraryState ? libraryState : [];\nconst user = JSON.parse(sessionStorage.getItem('user'));\n\nif (user) {\n    signUp.textContent = user.displayName || 'Anonymous';\n    signUp.removeEventListener('click', registerOpen);\n    signUp.addEventListener('click', logOutForm);\n    watchedBtn.addEventListener('click', clickFirebase);\n    queueBtn.addEventListener('click', clickFirebase);\n    btnClickFirebase();\n} else {\n    signUp.removeEventListener('click', logOutForm);\n    signUp.addEventListener('click', registerOpen);\n    signUp.textContent = 'Login | Join';\n    watchedBtn.addEventListener('click', btnClick);\n    queueBtn.addEventListener('click', btnClick);\n    btnClick(libraryState);\n}\n\nfunction userLogin() {\n    watchedBtn.addEventListener('click', clickFirebase);\n    queueBtn.addEventListener('click', clickFirebase);\n    watchedBtn.removeEventListener('click', btnClick);\n    queueBtn.removeEventListener('click', btnClick);\n    btnClickFirebase();\n}\n"],"names":["$1kXJT","parcelRequire","$80c1fb273848d079$export$2e2bcd8739ae039","moviesSet","map","param","poster_path","title","genres","release_date","vote_average","id","movieGenres","genre","name","length","concat","slice","toFixed","join","$6ec37d3ef03e8204$var$libraryEl","document","querySelector","$6ec37d3ef03e8204$var$watchedBtn","$6ec37d3ef03e8204$var$queueBtn","$6ec37d3ef03e8204$var$container","getElementById","$6ec37d3ef03e8204$var$watchList","default","load","$6ec37d3ef03e8204$var$pagination","$6ec37d3ef03e8204$var$perPage","$6ec37d3ef03e8204$var$queueList","$6ec37d3ef03e8204$export$7b0f8be661aeb9d7","btn","target","classList","remove","add","save","window","innerWidth","$jcFG7","removeAttribute","on","event","innerHTML","page","sessionStorage","setItem","savePage","getItem","movePageTo","removeItem","setAttribute","$iU1Pc","Notify","info","$6ec37d3ef03e8204$var$onPagination","$e6a7f6a50c110505$var$pagination","$e6a7f6a50c110505$var$perPage","$bpxeT","$e6a7f6a50c110505$var$db","$e6a7f6a50c110505$var$libraryEl","$e6a7f6a50c110505$var$watchedBtn","$e6a7f6a50c110505$var$queueBtn","$e6a7f6a50c110505$var$container","$e6a7f6a50c110505$var$btn","$e6a7f6a50c110505$export$40a221885d5feae1","$e6a7f6a50c110505$export$40f4114f0500288b","$e6a7f6a50c110505$var$_btnClickFirebase","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","user","userDatabase","JSON","parse","readUserData","uid","_ctx","sent","writeUserData","state","watched","queue","$e6a7f6a50c110505$var$onPagination","list","refs","$865c390aa2d1ad34$var$signUp","upbutton","addEventListener","pageYOffset","$865c390aa2d1ad34$var$watchedBtn","$865c390aa2d1ad34$var$queueBtn","removeEventListener","$865c390aa2d1ad34$var$libraryState","$865c390aa2d1ad34$var$user","textContent","displayName","$95ECi","registerOpen","logOutForm"],"version":3,"file":"my-library.7afed8c1.js.map"}